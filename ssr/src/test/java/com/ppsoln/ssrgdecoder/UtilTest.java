package com.ppsoln.ssrgdecoder;

import junit.framework.TestCase;

public class UtilTest extends TestCase {
    public void testReadUBits(){
        String[] bits = {
                "1", "10", "010", "1001",
                "01010", "100001", "1001010", "10101010",
                "110101010", "1101010100", "11010101001", "110010101001",
                "1100101010011001", "11001010100110011010", "110010101001100111010"
        };
        int[] expected = {1, 2, 2, 9, 10, 33, 74, 170, 426, 852, 1705, 3241, 51865, 829850, -1};

        for(int i = 0 ; i < bits.length ; i ++) {
            assertEquals(expected[i], Util.readUBits(bits[i],0, bits[i].length()));
        }
    }

    public void testReadBits() {
        String[] bits = {
                "0", "1", "01011101", "11011101", "011010101010",
                "111010101010", "01101010101010", "11101010101010", "0101101010101010",
                "1101101010101010", "00101101010101010", "10101101010101010", "010101101010101010",
                "110101101010101010", "01010101101010101010", "11010101101010101010", "011010101101010101010",
                "111010101101010101010", "0111010101101010101010", "1111010101101010101010", "011111010101101010101010",
                "111111010101101010101010", "001011111010101101010101010", "101011111010101101010101010",
                "0101011111010101101010101010", "1101011111010101101010101010", "00101011111010101101010101010",
                "10101011111010101101010101010", "000101011111010101101010101010", "100101011111010101101010101010",
                "01000101011111010101101010101010", "11000101011111010101101010101010"
        };
        int[] expected = {
                0, 1, 93, -35, 1706, -342, 6826, -1366,
                23210, -9558, 23210, -42326, 88746, -42326, 350890, -173398,
                875178, -173398, 1923754, -173398, 8215210, -173398, 24992426, -42116438,
                92101290, -42116438, 92101290, -176334166, 92101290, -444769622, 1165843114,
                -981640534
        };

        for (int i = 0 ; i < bits.length; i++) {
            assertEquals(expected[i], Util.readBits(bits[i], 0, bits[i].length()));
        }
    }
}